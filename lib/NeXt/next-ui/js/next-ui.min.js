!function(a){var b,c=a.global,d=c.document,e=d.documentMode||0,f=d.compatMode,g=c.navigator,h=c.location,i=g.userAgent.toLowerCase(),j=h.protocol.toLowerCase(),k=d.createElement("div"),l=k.style,m=(b=i.match(/msie (\d+)\./))&&b[1];l.cssText="opacity:.55";var n={webkit:["webkit","-webkit-"],gecko:["Moz","-moz-"],presto:["O","-o-"]},o={windows:/windows|win32/,macintosh:/macintosh|mac_powerpc/,linux:/linux/},p={ie:{is:"msie",exclude:"opera",version:"msie "},firefox:{is:"gecko",exclude:"webkit",version:"\\bfirefox/"},chrome:{is:"\\bchrome\\b",exclude:null,version:"\\bchrome/"},safari:{is:"safari",exclude:"\\bchrome\\b",version:"version/"},opera:{is:"opera",exclude:null,version:"version/"}},q={addEventListener:!!d.addEventListener,dispatchEvent:!!d.dispatchEvent,getBoundingClientRect:!!d.documentElement.getBoundingClientRect,onmousewheel:"onmousewheel"in d,XDomainRequest:!!c.XDomainRequest,crossDomain:!(!c.XDomainRequest&&!c.XMLHttpRequest),getComputedStyle:"getComputedStyle"in c,iePropertyChange:!!(m&&9>m),w3cChange:!m||m>8,w3cFocus:!m||m>8,w3cInput:!m||m>9,innerText:"innerText"in k,firstElementChild:"firstElementChild"in k,cssFloat:"cssFloat"in l,opacity:/^0.55$/.test(l.opacity),filter:"filter"in l,removeProperty:"removeProperty"in l};a.define("nx.Env",{"static":!0,properties:{documentMode:{value:e},compatMode:{value:f},userAgent:{value:i},strict:{get:function(){return"CSS1Compat"===f}},secure:{get:function(){return 0===j.indexOf("https")}},os:{get:function(){var a;for(a in o)if(o[a].test(i))break;return{name:a}}},prefix:{get:function(){return n[this.engine().name]}},engine:{get:function(){return(this[this.browser().name+"Engine"]||this.defaultEngine).call(this)}},browser:{get:function(){var a,b,c,d,e=0,f=this._check;for(a in p)if(b=p[a],c=f(new RegExp(b.is)),d=f(new RegExp(b.exclude)),c&&!d){i.indexOf("opr/")>-1&&(a="opera",b.version="\\bopr/"),e=this._versionByKeyRegexp(b.version);break}return{name:a,version:e}}}},methods:{firefoxEngine:function(){return{name:"gecko",version:this._versionByKeyRegexp("rv:")}},operaEngine:function(){var a=this._versionByKeyRegexp("presto\\/"),b="presto";return a||(b="webkit",a=this._versionByKeyRegexp("webkit\\/")),{name:b,version:a}},ieEngine:function(){return{name:"trident",version:this._versionByKeyRegexp("trident\\/")||4}},defaultEngine:function(){return{name:"webkit",version:this._versionByKeyRegexp("webkit\\/")}},support:function(a){return q[a]},getSupportMap:function(){return q},registerSupport:function(a,b){a in q||(q[a]=b)},_versionByKeyRegexp:function(a){var b=new RegExp(a+"(\\d+\\.\\d+)");return this._version(!0,b)},_version:function(a,b){var c;return a&&(c=b.exec(i))?parseFloat(c[1]):0},_check:function(a){return a.test(i)}}})}(nx),function(a){{var b=a.global,c=b.document,d=a.Env,e=c.createElement("div"),f=e.style,g=/width|height|top|right|bottom|left|size|margin|padding/,h=/[c-x%]/,i="px",j=/(?:^|-)([a-z])/g,k=/([A-Z])/g,l={lineHeight:!0,zIndex:!0,zoom:!0},m={"float":"styleFloat"};a.define("nx.Util",{"static":!0,methods:{getCssText:function(b){var c=[""];return a.each(b,function(a,b){c.push(this.getStyleProperty(b,!0)+":"+this.getStyleValue(b,a))},this),c.join(";")},getStyleValue:function(a,b){var c=this.getStyleProperty(a),d=b;return g.test(c)&&(h.test(b)||l[c]||(d+=i)),d},getStyleProperty:function(a,b){var c=this.lowerCamelCase(a);return c=c in f?this.deCamelCase(a):b?d.prefix()[1]+a:d.prefix()[0]+this.upperCamelCase(a),m[a]||c},lowerCamelCase:function(a){var b=this.upperCamelCase(a);return b.charAt(0).toLowerCase()+b.substring(1)},upperCamelCase:function(a){return a.replace(j,function(a,b){return b.toUpperCase()})},deCamelCase:function(a){return a.replace(k,function(a,b){return"-"+b.toLowerCase()})},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)}}})}}(nx),function(a){{var b=a.data.Collection;a.define("nx.dom.Node",a.Comparable,{methods:{compare:function(a){return a&&this.$dom===a.$dom?0:-1},init:function(a){this.$dom=a},isElement:function(){return 1===this.$dom.nodeType},index:function(){var a,b=0;if(null!==this.parentNode())for(;null!==(a=this.previousSibling());)++b;else b=-1;return b},childAt:function(a){var b=null;if(a>=0)for(b=this.firstChild();b&&--a>=0;){b=b.nextSibling();break}return b},contains:function(a){return this.$dom.contains(a.$dom)},firstChild:function(){return new this.constructor(this.$dom.firstElementChild)},lastChild:function(){return new this.constructor(this.$dom.lastElementChild)},previousSibling:function(){return new this.constructor(this.$dom.previousElementSibling)},nextSibling:function(){return new this.constructor(this.$dom.nextElementSibling)},parentNode:function(){return new this.constructor(this.$dom.parentNode)},children:function(){var c=new b;return a.each(this.$dom.children,function(a){c.add(new this.constructor(a))},this),c},cloneNode:function(a){return new this.constructor(this.$dom.cloneNode(a))},hasChild:function(a){return a.$dom.parentNode==this.$dom},appendChild:function(a){this.$dom.appendChild(a.$dom)},insertBefore:function(a,b){this.$dom.insertBefore(a.$dom,b.$dom)},removeChild:function(a){this.hasChild(a)&&this.$dom.removeChild(a.$dom)},empty:function(){this.children().each(function(a){this.removeChild(a)},this)}}})}}(nx),function(a){a.define("nx.dom.Text",a.dom.Node)}(nx),function(a){var b=a.global,c=b.document,d=a.Env,e=a.Util,f=/^t(?:able|d|h)$/i,g={thin:"2px",medium:"4px",thick:"6px"},h="gecko"===d.engine().name,i="margin",j="padding",k="border",l="position",m="fixed",n=a.data.Collection,o={value:{set:function(a,b){var c=a.type;switch(c){case"checkbox":case"radio":a.checked=!!b;break;default:a.value=b}},get:function(a){var b=a.type,c=a.value;switch(b){case"checkbox":case"radio":c=!!a.checked;break;default:c=a.value}return c}}},p={"class":"className","for":"htmlFor"},q={disabled:"disabled",checked:"checked"};!function(){a.each(p,function(a,b){o[b]={set:function(b,c){b[a]=c},get:function(b){return b[a]}}}),a.each(q,function(a,b){o[b]={set:function(c,d){d?c[a]=!!d:c.removeAttribute(b)},get:function(b){return!!b[a]}}})}();var r=a.define("nx.dom.Element",a.dom.Node,{methods:{get:function(a){return"text"===a?this.getText():"html"==a?this.getHtml():this.getAttribute(a)},set:function(a,b){"text"===a?this.setText(b):"html"==a?this.setHtml(b):this.setAttribute(a,b)},select:function(a){var b=this.$dom.querySelector(a);return new r(b)},selectAll:function(a){for(var b=this.$dom.querySelectorAll(a),c=0,d=b[c],e=new n;d;c++)d=b[c],e.add(new r(d));return e},show:function(){this.setAttribute("nx-status","")},hide:function(){this.setAttribute("nx-status","hidden")},hasClass:function(a){return this.$dom.classList.contains(a)},addClass:function(){var a=this.$dom.classList;return a.add.apply(a,arguments)},removeClass:function(){var a=this.$dom.classList;return a.remove.apply(a,arguments)},toggleClass:function(a){return this.$dom.classList.toggle(a)},getDocument:function(){var a=this.$dom,b=c;return a&&(b=9===a.nodeType?a:a.ownerDocument||a.document),b},getWindow:function(){var a=this.getDocument();return a.defaultView||a.parentWindow||b},getRoot:function(){return d.strict()?c.documentElement:c.body},getBound:function(){var a=this.$dom.getBoundingClientRect(),b=this.getRoot(),c=b.clientTop||0,d=b.clientLeft||0;return{top:a.top-c,right:a.right,bottom:a.bottom,left:a.left-d,width:a.width,height:a.height}},margin:function(a){return this._getBoxWidth(i,a)},padding:function(a){return this._getBoxWidth(j,a)},border:function(a){return this._getBoxWidth(k,a)},getOffset:function(){var a=this.$dom.getBoundingClientRect(),c=this.getRoot(),d=c.clientTop||0,e=c.clientLeft||0;return{top:a.top+(b.pageYOffset||c.scrollTop)-d,left:a.left+(b.pageXOffset||c.scrollLeft)-e}},setOffset:function(a){var c=this.getStyle(l),d=a,e={left:Math.max(b.pageXOffset||0,root.scrollLeft),top:Math.max(b.pageYOffset||0,root.scrollTop)};c===m&&(d={left:parseFloat(d)+e.scrollX,top:parseFloat(d)+e.scrollY}),this.setStyles(d)},hasStyle:function(a){var b=this.$dom.style.cssText;return b.indexOf(a+":")>-1},getStyle:function(a){var b=getComputedStyle(this.$dom,null),c=e.getStyleProperty(a);return b[c]||""},setStyle:function(a,b){var c=e.getStyleProperty(a);this.$dom.style[c]=e.getStyleValue(a,b)},removeStyle:function(a){var b=e.getStyleProperty(a,!0);this.$dom.style.removeProperty(b)},setStyles:function(a){this.$dom.style.cssText+=e.getCssText(a)},getAttribute:function(a){var b=o[a];return b?b.get?b.get(this.$dom):this.$dom.getAttribute(b):this.$dom.getAttribute(a)},setAttribute:function(a,b){var c=o[a];return c?c.set?c.set(this.$dom,b):this.$dom.setAttribute(c,b):this.$dom.setAttribute(a,b)},removeAttribute:function(a){this.$dom.removeAttribute(p[a]||a)},getAttributes:function(){var b={};return a.each(this.$dom.attributes,function(a){b[a.name]=a.value}),b},setAttributes:function(b){a.each(b,function(a,b){this.setAttribute(b,a)},this)},getText:function(){return this.$dom.textContent},setText:function(a){this.$dom.textContent=a},getHtml:function(){return this.$dom.innerHTML},setHtml:function(a){this.$dom.innerHTML=a},addEventListener:function(a,b,c){this.$dom.addEventListener(a,b,c||!1)},removeEventListener:function(a,b,c){this.$dom.removeEventListener(a,b,c||!1)},_getBoxWidth:function(a,b){var c,d,e=this.$dom;switch(a){case j:case i:d=this.getStyle(a+"-"+b),c=parseFloat(d);break;default:d=this.getStyle("border-"+b+"-width"),h&&f.test(e.tagName)&&(d=0),c=parseFloat(d)||g[d]}return c||0}}})}(nx),function(a){var b=a.data.Collection;a.define("nx.dom.Fragment",a.dom.Node,{methods:{children:function(){var c=new b;return a.each(this.$dom.childNodes,function(a){c.add(new this.constructor(a))},this),c}}})}(nx),function(a){var b=a.dom.Element,c=a.dom.Fragment,d=a.dom.Text,e=a.global,f=e.document,g=a.Util,h={topFrame:null,hasReady:!1,queue:[]},i={setHasReady:function(a){h.hasReady=a},getHasReady:function(){return h.hasReady},addQueue:function(a){h.queue.push(a)},clearQueue:function(){h.queue.length=0},execQueue:function(){for(var a=0,b=h.queue.length;b>a;a++)h.queue[a]()},setTopFrame:function(a){h.topFrame=a},getTopFrame:function(){return h.topFrame}},j={initReady:function(a){return i.addQueue(a),j.isReady()},fireReady:function(){i.execQueue(),i.clearQueue()},setTopFrame:function(){try{i.setTopFrame(null===e.frameElement&&f.documentElement)}catch(a){}},doScrollCheck:function(){var a=i.getTopFrame();if(a&&a.doScroll){try{a.doScroll("left")}catch(b){return setTimeout(j.doScrollCheck,50)}j.fireReady()}},isOnLoad:function(a){return"load"===(a||e.event).type},isReady:function(){return i.getHasReady()||"complete"===f.readyState},detach:function(){f.addEventListener?(f.removeEventListener("DOMContentLoaded",j.completed,!1),e.removeEventListener("load",j.completed,!1)):(f.detachEvent("onreadystatechange",j.completed),e.detachEvent("onload",j.completed))},w3cReady:function(){f.addEventListener("DOMContentLoaded",j.completed,!1),e.addEventListener("load",j.completed,!1)},ieReady:function(){f.attachEvent("onreadystatechange",j.completed),e.attachEvent("onload",j.completed),j.setTopFrame(),j.doScrollCheck()},readyMain:function(){return f.body?(f.addEventListener?j.w3cReady():j.ieReady(),void 0):setTimeout(j.readyMain)},completed:function(a){(j.isReady()||j.isOnLoad(a))&&(i.setHasReady(!0),j.detach(),j.fireReady())}},k={svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},l=a.define("nx.dom.Document",{"static":!0,properties:{cssStyleSheet:{get:function(){var a=this._cssStyleSheet;if(!a){var b=f.getElementById("nx-style")||this._createStyleNode();a=this._cssStyleSheet=this._getCSSStyleSheetInstance(b)}return a}},root:{get:function(){return f.documentElement}},body:{get:function(){return new b(f.body)}}},methods:{on:function(a,b,c){this._attachDocumentListeners(a),this.inherited(a,b,c)},upon:function(a,b,c){this._attachDocumentListeners(a),this.inherited(a,b,c)},_attachDocumentListeners:function(a){var b=this._documentListeners;if(!(a in b)){var c=this,d=b[a]=function(b){c.fire(a,b)};f.addEventListener(a,d)}},registerNS:function(a,b){k[a]=b},resolveNS:function(a){return k[a]},createFragment:function(){return new c(f.createDocumentFragment())},createElement:function(a){return new b(f.createElement(a))},createText:function(a){return new d(f.createTextNode(a))},createElementNS:function(a,c){var d=l.resolveNS(a);if(d)return new b(f.createElementNS(d,c));throw new Error("The namespace "+a+" is not registered.")},wrap:function(b){return a.is(b,Node)?b:void 0},docRect:function(){var a=this.root(),b=e.innerHeight||0,c=e.innerWidth||0,d=a.scrollWidth,f=a.scrollHeight,g={left:Math.max(e.pageXOffset||0,a.scrollLeft),top:Math.max(e.pageYOffset||0,a.scrollTop)};return d=Math.max(d,c),f=Math.max(f,b),{width:c,height:b,scrollWidth:d,scrollHeight:f,scrollX:g.left,scrollY:g.top}},ready:function(a){j.initReady(a)?setTimeout(j.fireReady,1):j.readyMain()},addRule:function(a,b,c){return this._ruleAction("add",[a,b,c])},insertRule:function(a,b){return this._ruleAction("insert",[a,b])},deleteRule:function(a){return this._ruleAction("delete",[a])},removeRule:function(a,b){return this._ruleAction("remove",[a,b])},addRules:function(b){a.each(b,function(a,b){this.addRule(b,g.getCssText(a),null)},this)},deleteRules:function(){for(var a=this.cssStyleSheet().rules.length;a--;)this.deleteRule(0)},_ruleAction:function(a,b){var c=this.cssStyleSheet(),d=b.length-1;return b[d]=this._defRuleIndex(c,b[d]),c[a+"Rule"].apply(c,b),this._defRuleIndex(c,null)},_defRuleIndex:function(a,b){return null===b?a.rules.length:b},_createStyleNode:function(){var a=f.createElement("style");return a.type="text/css",a.id="nx-style",(f.head||f.getElementsByTagName("head")[0]||f.documentElement).appendChild(a),a},_getCSSStyleSheetInstance:function(a){var b,c=f.styleSheets,d=null;for(b in c)if(d=c[b],d.ownerNode===a)break;return d}}})}(nx),function(a){function b(b,c,d,e){if(a.is(d,f))b.setBinding(c,a.extend(d.gets(),{bindingType:"property"}));else if(a.is(d,"String")&&i.test(d)){var g=RegExp.$1+",bindingType=property";"#"===g[0]?b.setBinding(c,"owner."+g.slice(1),e||b):b.setBinding(c,g?"model."+g:"model",e||b)}else b.set(c,d)}function c(b,c,d,e){if(a.is(d,f))b.setBinding(c,d.gets());else if(a.is(d,"String")&&i.test(d)){var g=RegExp.$1+",bindingType=event";"#"===g[0]?b.setBinding(c,"owner."+g.slice(1),e||b):b.setBinding(c,g?"model."+g:"model",e||b)}else b.on(c,d,e||b)}function d(f,g){if(f){var h;if(a.is(f,"Array"))h=new m("fragment"),a.each(f,function(a){d(a,g).attach(h)});else if(a.is(f,"Object")){var i=f.type;if(i){var j=a.is(i,"String")?a.path(e,i):i;if(!a.is(j,"Function"))throw new Error('Component "'+i+'" is not defined.');h=new j}else h=new m(f.tag||"div");var k=f.name,l=f.props,n=f.events,o=f.content;k&&h.register("@name",k),g&&h.owner(g),a.each(l,function(a,c){b(h,c,a)}),a.each(n,function(a,b){c(h,b,a)}),void 0!==o&&b(h,"content",o)}else void 0!==f&&(h=new m("text",f));return h}return null}var e=a.global,f=a.Binding,g=a.data.Collection,h=a.dom.Document,i=/(?={)\{([^{}]+?)\}(?!})/,j=a.define("nx.ui.AbstractComponent",a.Observable,{"abstract":!0,statics:{createComponent:d},events:["enter","leave"],properties:{content:{get:function(){return this._content},set:function(b){a.each(this._content.toArray(),function(a){a.destroy()}),a.is(b,j)?b.attach(this):b&&d(b,this.owner()).attach(this)}},model:{get:function(){return this._model||this._inheritedModel},set:function(b,c){c?this._inheritedModel=b:this._model=b,this._content.each(function(c){a.is(c,"String")||c.model(b,!0)})}},owner:{value:null},parent:{value:null}},methods:{init:function(){this.inherited(),this._resources={},this._content=new g},attach:function(b,c){if(this.detach(),a.is(b,j)){var d=b.getContainer();if(!d)throw new Error(b.__type__+" can not be used as a container.");var e=this.resolve("@name"),f=this.owner()||b;e&&f.register(e,this),this.onAttach(b,c),c>=0?b.content().insert(this,c):b.content().add(this),this.parent(b),this.owner(f),this.fire("enter",{parent:b,owner:f}),this._attached=!0}},detach:function(){if(this._attached){var a=this.resolve("@name"),b=this.owner(),c=this.parent();a&&b.unregister(a),this.onDetach(c),c.content().remove(this),this.parent(null),this.owner(null),this.fire("leave",{parent:c,owner:b}),this._attached=!1}},onAttach:function(){throw new Error("Not Implemented")},onDetach:function(){throw new Error("Not Implemented")},register:function(a,b,c){var d=this._resources;a in d&&!c||(d[a]=b)},unregister:function(a){var b=this._resources;a in b&&delete b[a]},resolve:function(a){var b=this._resources;return a in b?b[a]:void 0},getContainer:function(){if("fragment"===this.resolve("@tag")){var a=this.parent();if(a)return a.getContainer()}return this.resolve("@root")},dispose:function(){this.inherited(),this.content().each(function(a){a.dispose()}),this._resources=null,this._content=null,this._model=null,this._inheritedModel=null},destroy:function(){this.detach(),this.inherited()}}}),k=a.define(a.Observable,{methods:{init:function(a){this.inherited(),this._owner=a,this._classList=[]},has:function(a){return a in this._classList},get:function(a){return this._classList[a]},set:function(a,b){this._classList[a]=b,this._owner.resolve("@root").set("class",this._classList.join(" "))},hasClass:function(a){return this._classList.indexOf(a)>=0},addClass:function(a){this.hasClass(a)||(this._classList.push(a),this._owner.resolve("@root").set("class",this._classList.join(" ")))},removeClass:function(a){var b=this._classList.indexOf(a);b>=0&&(this._classList.splice(b,1),this._owner.resolve("@root").set("class",this._classList.join(" ")))},dispose:function(){this.inherited(),this._owner=null,this._classList=null}}}),l=a.define(a.Observable,{methods:{init:function(a){this.inherited(),this._owner=a},get:function(a){return this._owner.resolve("@root").getStyle(a)},set:function(a,b){this._owner.resolve("@root").setStyle(a,b)},dispose:function(){this.inherited(),this._owner=null}}}),m=(a.define({}),a.define(j,{"final":!0,properties:{"class":{get:function(){return this._class},set:function(c){if(a.is(c,"Array")){var d=this._class;a.each(c,function(a,c){b(d,""+c,a,this)},this)}else this.resolve("@root").set("class",c)}},style:{get:function(){return this._style},set:function(c){if(a.is(c,"Object")){var d=this._style;a.each(c,function(a,c){b(d,c,a,this)},this)}else this.resolve("@root").set("style",c)}},template:{get:function(){return this._template},set:function(a){this._template=a,this._generateContent()}},items:{get:function(){return this._items},set:function(a){var b=this._items;b&&b.off&&b.off("change",this._onItemsChange,this),b=this._items=a,b&&b.on&&b.on("change",this._onItemsChange,this),this._generateContent()}},value:{get:function(){return this.resolve("@root").get("value")},set:function(a){return this.resolve("@root").set("value",a)},binding:{direction:"<>"}},states:{value:null}},methods:{init:function(a,b){if(this.inherited(),this._domListeners={},this._resources={},this._content=new g,this._class=new k(this),this._style=new l(this),a){var c=a.split(":");if(2===c.length){var d=c[0];a=c[1],this.register("@ns",d),this.register("@root",h.createElementNS(d,a))}else"text"===a?this.register("@root",h.createText(b)):"fragment"===a?this.register("@root",h.createFragment()):this.register("@root",h.createElement(a));this.register("@tag",a)}switch(a){case"input":case"textarea":this.on("change",function(a,b){switch(b.target.type){case"checkbox":case"radio":this.notify("checked");break;default:this.notify("value")}},this),this.on("input",function(){this.notify("value")},this);break;case"select":this.on("change",function(){this.notify("selectedIndex"),this.notify("value")},this)}},get:function(a){return this.has(a)?this.inherited(a):this.resolve("@root").get(a)},set:function(a,b){this.has(a)?this.inherited(a,b):(this.resolve("@root").set(a,b),this.notify(a))},on:function(a,b,c){this._attachDomListener(a),this.inherited(a,b,c)},upon:function(a,b,c){this._attachDomListener(a),this.inherited(a,b,c)},fire:function(a,b){var c,d,e=this.__listeners__[a];if(e)for(var f=0,g=e.length;g>f;f++)if(c=e[f],c&&c.handler&&(d=c.handler.call(c.context,c.owner,b),d===!1))return!1},dispose:function(){var b=this.resolve("@root");b&&a.each(this._domListeners,function(a,c){":"===c.charAt(0)?b.removeEventListener(c.slice(1),a,!0):b.removeEventListener(c,a)}),this.items(null),this._class.dispose(),this._style.dispose(),this.inherited(),this._domListeners=null},onAttach:function(b,c){var d=this.resolve("@root");if(d){var e=b.getContainer();if(c>=0){var f=b.content().getItem(c);f&&"fragment"===f.resolve("@tag")&&(f=f.content().getItem(0)),f?e.insertBefore(d,f.resolve("@root")):e.appendChild(d)}else e.appendChild(d);var g=this.states(),h=null;if(g&&(h=g.enter),h){var i=d.$dom.style.cssText,j="all "+(h.duration||500)+"ms";d.setStyles(a.extend({transition:j},h)),this.upon("transitionend",function(){d.removeStyle("transition")}),setTimeout(function(){d.$dom.style.cssText=i+";transition: "+j},0)}}},onDetach:function(b){var c=this.resolve("@root");if(c){var d=this.resolve("@tag"),e=this;if("fragment"===d)a.each(e.content(),function(a){c.appendChild(a.resolve("@root"))});else{var f=this.states(),g=null;if(f&&(g=f.leave),g){var h=c.$dom.style.cssText,i="all "+(g.duration||500)+"ms";c.setStyle("transition",i),setTimeout(function(){c.setStyles(g)},0),this.upon("transitionend",function(){c.$dom.style.cssText=h,b.getContainer().removeChild(c)})}else b.getContainer().removeChild(c)}}},_attachDomListener:function(a){var b=this._domListeners;if(!(a in b)){var c=this,d=this.resolve("@root"),e=b[a]=function(b){c.fire(a,b)};":"===a.charAt(0)?d.addEventListener(a.slice(1),e,!0):d.addEventListener(a,e)}},_generateContent:function(){var b=this._template,c=this._items;a.each(this._content.toArray(),function(a){a.destroy()}),b&&c&&a.each(c,function(a){var c=d(b,this.owner());c.model(a),c.attach(this)},this)},_onItemsChange:function(b,c){var e=c.action,f=c.index||-1;if("add"===e)a.each(c.items,function(a){var b=d(this._template,this.owner());b.model(a),b.attach(this,f)},this);else if("remove"===e)a.each(c.items,function(b){a.each(this.content().toArray(),function(a){a.model()===b&&a.detach()},this)},this);else if("replace"===e){var g=c.oldItem,h=c.newItem;a.each(this.content().toArray(),function(a){a.model()===g&&a.model(h)},this)}else if("sort"===e){var i=c.comparator,j=this.content().toArray().sort(function(a,b){return i(a.model(),b.model())});a.each(j,function(a){a.attach(this)},this)}else this._generateContent()}}}))}(nx),function(a){var b=a.ui.AbstractComponent;a.define("nx.ui.Component",b,{properties:{model:{get:function(){return this._model||this._inheritedModel},set:function(b,c){c?this._inheritedModel=b:this._model=b,this._innerComp.model(b,!0),this._content.each(function(c){a.is(c,"String")||c.model(b,!0)})}}},methods:{init:function(){this.inherited();var a=this["@view"];if(a){var c=this._innerComp=b.createComponent(a,this);this.register("@root",c.resolve("@root")),this.register("@tag",c.resolve("@tag"))}},onAttach:function(a,b){this._innerComp.onAttach(a,b)},onDetach:function(){this._innerComp.onDetach(this.parent())},on:function(a,b,c){this.can(a)?this.inherited(a,b,c):this._innerComp.on(a,b,c)},upon:function(a,b,c){this.can(a)?this.inherited(a,b,c):this._innerComp.upon(a,b,c)},off:function(a,b,c){this.can(a)?this.inherited(a,b,c):this._innerComp.off(a,b,c)},dispose:function(){var a=this._innerComp;a&&a.dispose(),this._innerComp=null,this.inherited()}}})}(nx),function(a){var b=(a.global,a.dom.Document);a.define("nx.ui.Application",a.ui.AbstractComponent,{methods:{init:function(){this.inherited();var a=this.start,c=this;this.start=function(){return b.ready(function(){a.call(c)}),this},this._globalListeners={}},start:function(){throw new Error('Method "start" is not implemented')},stop:function(){throw new Error('Method "stop" is not implemented')},getContainer:function(){return b.body()},on:function(a,b,c){this.can(a)||this._attachGlobalListeners(a),this.inherited(a,b,c)},upon:function(a,b,c){this.can(a)||this._attachGlobalListeners(a),this.inherited(a,b,c)},_attachGlobalListeners:function(a){var b=this._globalListeners;if(!(a in b)){var c=this,d=b[a]=function(b){c.fire(a,b)};window.addEventListener(a,d)}}}})}(nx);