<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Base</title>
    <script type="text/javascript" src="http://10.75.161.96:8080/jenkins/job/DailyBuild/lastSuccessfulBuild/artifact/dest/next-core.js"></script>
    <script type="text/javascript" src="http://10.75.161.96:8080/jenkins/job/nextui/lastSuccessfulBuild/artifact/dest/js/next-ui.js"></script>
    <script type="text/javascript" src="http://10.75.161.96:8080/jenkins/job/UI_Component/lastSuccessfulBuild/artifact/dest/js/next-components.js"></script>
    <script type="text/javascript" src="http://10.75.161.96:8080/jenkins/job/Next-graphic/lastSuccessfulBuild/artifact/dest/js/next-graphic.js"></script>
    <link rel="stylesheet" href="http://10.75.161.96:8080/jenkins/job/nextui/lastSuccessfulBuild/artifact/dest/css/next-blue.css"/>
    <link rel="stylesheet" href="http://10.75.161.96:8080/jenkins/job/Next-graphic/lastSuccessfulBuild/artifact/dest/css/next-graphic.css"/>
</head>
<body>

<div id="topo"></div>
<script type="text/javascript">

    var topologyData = {
        nodes: [
            {"id": 0, "x": 410, "y": 100, "name": "12K-1"},
            {"id": 1, "x": 410, "y": 280, "name": "12K-2"},
            {"id": 2, "x": 660, "y": 280, "name": "Of-9k-03"},
            {"id": 3, "x": 660, "y": 100, "name": "Of-9k-02"},
            {"id": 4, "x": 180, "y": 190, "name": "Of-9k-01"}
        ],
        links: [
            {"source": 0, "target": 1},
            {"source": 1, "target": 2},
            {"source": 1, "target": 3},
            {"source": 4, "target": 1},
            {"source": 2, "target": 3},
            {"source": 2, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},

            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 3, "target": 0},
            {"source": 0, "target": 4},
            {"source": 0, "target": 4},
            {"source": 0, "target": 3}
        ]
    };
    var colorTable = ['#C3A5E4', '#75C6EF', '#CBDA5C', '#ACAEB1 ', '#2CC86F'];


    var topo = new nx.graphic.Topology({
        width: 1200,
        height: 600,
        nodeIconType: 'router',
        nodeLabel: 'model.id',
        linkType: 'curve',
        nodeShowIcon: true,
        data: topologyData
    });

    var Vector = nx.math.Vector;
    var Line = nx.math.Line;

    topo.on('afterSetData', function () {


        var links = topo.getLayer('links').links();
        var link = links[4];

        links[1].enable(false);
        links[1].update();


        link.drawMethod(function () {
            var path = [], d;
            var _gutter = 30;
            var gutter = new Vector(0, _gutter);
            var line = this.line();
            var n, point;
            if (this.reverse()) {
                line = line.negate();
            }
            _gutter = _gutter * 3;
            n = line.normal().multiply(_gutter);
            point = line.center().add(n);
            path.push('M', line.start.x, line.start.y);
            path.push('Q', line.start.x + 70, line.start.y - 100, line.end.x, line.end.y + 150);
            path.push('T', line.end.x, line.end.y);
            d = path.join(' ');
            this.resolve('path').append();
            this.resolve('line').remove();
            this.resolve('path').set('d', d);
        });

        link.update();

        //drawMethod

        topo.getNode(1).enable(false);


    });


    var app = new nx.ui.Application();
    topo.attach(app);

</script>
</body>
</html>