<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/web/Env.js - Next graph</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="Next graph" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/nx.dom.Document.html">nx.dom.Document</a></li>
                                <li><a href="../classes/nx.dom.Element.html">nx.dom.Element</a></li>
                                <li><a href="../classes/nx.dom.Fragment.html">nx.dom.Fragment</a></li>
                                <li><a href="../classes/nx.dom.Node.html">nx.dom.Node</a></li>
                                <li><a href="../classes/nx.dom.Text.html">nx.dom.Text</a></li>
                                <li><a href="../classes/nx.http.XHR.html">nx.http.XHR</a></li>
                                <li><a href="../classes/nx.http.XHRPool.html">nx.http.XHRPool</a></li>
                                <li><a href="../classes/nx.nx.JSON.html">nx.nx.JSON</a></li>
                                <li><a href="../classes/nx.task.nx.http.HttpClient.html">nx.task.nx.http.HttpClient</a></li>
                                <li><a href="../classes/nx.task.Task.html">nx.task.Task</a></li>
                                <li><a href="../classes/nx.task.TaskList.html">nx.task.TaskList</a></li>
                                <li><a href="../classes/nx.ui.Application.html">nx.ui.Application</a></li>
                                <li><a href="../classes/nx.ui.Collection.html">nx.ui.Collection</a></li>
                                <li><a href="../classes/nx.ui.Component.html">nx.ui.Component</a></li>
                                <li><a href="../classes/nx.ui.CssClass.html">nx.ui.CssClass</a></li>
                                <li><a href="../classes/nx.ui.CssStyle.html">nx.ui.CssStyle</a></li>
                                <li><a href="../classes/nx.ui.DOMComponent.html">nx.ui.DOMComponent</a></li>
                                <li><a href="../classes/nx.ui.nx.Env.html">nx.ui.nx.Env</a></li>
                                <li><a href="../classes/nx.ui.nx.HttpClient.html">nx.ui.nx.HttpClient</a></li>
                                <li><a href="../classes/nx.ui.nx.Util.html">nx.ui.nx.Util</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src/web/Env.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
(function (nx) {
    //@https://github.com/yui/yui3/blob/master/src/yui/js/yui-ua.js
    var window = nx.global,
        document = window.document,
        documentMode = document.documentMode || 0,
        compatMode = document.compatMode,
        navigator = window.navigator,
        location = window.location,
        userAgent = navigator.userAgent.toLowerCase(),
        protocol = location.protocol.toLowerCase();
    var tempElement = document.createElement(&#x27;div&#x27;),
        tempStyle = tempElement.style,
        result,
        ie = (result = userAgent.match(/msie (\d+)\./)) &amp;&amp; result[1];

    //test opacity:
    tempStyle.cssText = &quot;opacity:.55&quot;;

    var vendorPrefixMap = {
        &#x27;webkit&#x27;: [&#x27;webkit&#x27;, &#x27;-webkit-&#x27;],
        &#x27;gecko&#x27;: [&#x27;Moz&#x27;, &#x27;-moz-&#x27;],
        &#x27;presto&#x27;: [&#x27;O&#x27;, &#x27;-o-&#x27;],
        &#x27;trident&#x27;: [&#x27;ms&#x27;, &#x27;-ms-&#x27;]
    };

    var osPatternMap = {
        &#x27;windows&#x27;: /windows|win32/,
        &#x27;macintosh&#x27;: /macintosh|mac_powerpc/,
        &#x27;linux&#x27;: /linux/
    };

    var supportMap = {
        addEventListener: !! document.addEventListener,
        dispatchEvent: !! document.dispatchEvent,
        getBoundingClientRect: !! document.documentElement.getBoundingClientRect,
        onmousewheel: &#x27;onmousewheel&#x27; in document,
        XDomainRequest: !! window.XDomainRequest,
        crossDomain: !! (window.XDomainRequest || window.XMLHttpRequest),
        getComputedStyle: &#x27;getComputedStyle&#x27; in window,
        iePropertyChange: !! (ie &amp;&amp; ie &lt; 9),
        w3cChange: !ie || ie &gt; 8,
        w3cFocus: !ie || ie &gt; 8,
        w3cInput: !ie || ie &gt; 9,
        innerText: &#x27;innerText&#x27; in tempElement,
        firstElementChild: &#x27;firstElementChild&#x27; in tempElement,
        cssFloat: &#x27;cssFloat&#x27; in tempStyle,
        opacity: (/^0.55$/).test(tempStyle.opacity),
        filter: &#x27;filter&#x27; in tempStyle,
        classList: !! tempElement.classList,
        removeProperty: &#x27;removeProperty&#x27; in tempStyle,
        touch:&#x27;ontouchstart&#x27; in document.documentElement
    };

    var engineMap = {
        firefox: function () {
            return {
                name: &#x27;gecko&#x27;,
                version: getVersion(&#x27;rv:&#x27;)
            };
        },
        opera: function () {
            var version = getVersion(&#x27;presto\\/&#x27;);
            var engineName = &#x27;presto&#x27;;
            if (!version) {
                engineName = &#x27;webkit&#x27;;
                version = getVersion(&#x27;webkit\\/&#x27;);
            }
            return {
                name: engineName,
                version: version
            };
        },
        ie: function () {
            return {
                name: &#x27;trident&#x27;,
                version: getVersion(&#x27;trident\\/&#x27;) || 4
            };
        },
        &#x27;default&#x27;: function () {
            return {
                name: &#x27;webkit&#x27;,
                version: getVersion(&#x27;webkit\\/&#x27;)
            };
        }
    };

    function getVersion(pattern) {
        var regexp = new RegExp(pattern + &#x27;(\\d+\\.\\d+)&#x27;);
        var regexResult;
        return (regexResult = regexp.exec(userAgent)) ? parseFloat(regexResult[1]) : 0;
    }

    var os = (function () {
        var osName;
        for (osName in osPatternMap) {
            if (osPatternMap[osName].test(userAgent)) {
                break;
            }
        }
        return {
            name: osName
        };
    })();

    var browser = (function () {
        var browserName,
            item,
            checkIs,
            checkExclude,
            browserVersion = 0;

        for (browserName in browserPatternMap) {
            item = browserPatternMap[browserName];
            checkIs = (new RegExp(item.is)).test(userAgent);
            checkExclude = (new RegExp(item.exclude)).test(userAgent);
            if (checkIs &amp;&amp; !checkExclude) {
                if (userAgent.indexOf(&#x27;opr/&#x27;) &gt; -1) {
                    browserName = &#x27;opera&#x27;;
                    item.version = &#x27;\\bopr\/&#x27;;
                }
                browserVersion = getVersion(item.version);
                break;
            }
        }

        return {
            name: browserName,
            version: browserVersion
        };
    })();

    var browserPatternMap = {
        ie: {
            is: &#x27;msie&#x27;,
            exclude: &#x27;opera&#x27;,
            version: &#x27;msie &#x27;
        },
        firefox: {
            is: &#x27;gecko&#x27;,
            exclude: &#x27;webkit&#x27;,
            version: &#x27;\\bfirefox\/&#x27;
        },
        chrome: {
            is: &#x27;\\bchrome\\b&#x27;,
            exclude: null,
            version: &#x27;\\bchrome\/&#x27;
        },
        safari: {
            is: &#x27;safari&#x27;,
            exclude: &#x27;\\bchrome\\b&#x27;,
            version: &#x27;version\/&#x27;
        },
        opera: {
            is: &#x27;opera&#x27;,
            exclude: null,
            version: &#x27;version\/&#x27;
        }
    };


    var keyMap = {
        BACKSPACE: 8,
        TAB: 9,
        CLEAR: 12,
        ENTER: 13,
        SHIFT: 16,
        CTRL: 17,
        ALT: 18,
        META: (browser.name === &quot;chrome&quot; || browser.name === &quot;webkit&quot; || browser.name === &quot;safari&quot;) ? 91 : 224, // the apple key on macs
        PAUSE: 19,
        CAPS_LOCK: 20,
        ESCAPE: 27,
        SPACE: 32,
        PAGE_UP: 33,
        PAGE_DOWN: 34,
        END: 35,
        HOME: 36,
        LEFT_ARROW: 37,
        UP_ARROW: 38,
        RIGHT_ARROW: 39,
        DOWN_ARROW: 40,
        INSERT: 45,
        DELETE: 46,
        HELP: 47,
        LEFT_WINDOW: 91,
        RIGHT_WINDOW: 92,
        SELECT: 93,
        NUMPAD_0: 96,
        NUMPAD_1: 97,
        NUMPAD_2: 98,
        NUMPAD_3: 99,
        NUMPAD_4: 100,
        NUMPAD_5: 101,
        NUMPAD_6: 102,
        NUMPAD_7: 103,
        NUMPAD_8: 104,
        NUMPAD_9: 105,
        NUMPAD_MULTIPLY: 106,
        NUMPAD_PLUS: 107,
        NUMPAD_ENTER: 108,
        NUMPAD_MINUS: 109,
        NUMPAD_PERIOD: 110,
        NUMPAD_DIVIDE: 111,
        F1: 112,
        F2: 113,
        F3: 114,
        F4: 115,
        F5: 116,
        F6: 117,
        F7: 118,
        F8: 119,
        F9: 120,
        F10: 121,
        F11: 122,
        F12: 123,
        F13: 124,
        F14: 125,
        F15: 126,
        NUM_LOCK: 144,
        SCROLL_LOCK: 145
    };


    var engine = (engineMap[browser] || engineMap[&#x27;default&#x27;])();

    /**
     * Environment and check behavior support
     * @class nx.Env
     * @constructor
     */
    nx.define(&#x27;nx.Env&#x27;, {
        static: true,
        properties: {
            /**
             * Document mode
             * @property documentMode
             * @type {Number}
             * @default 0
             */
            documentMode: {
                value: documentMode
            },
            /**
             * Document compatMode
             * @property compatMode
             * @type {String}
             * @default &quot;CSS1Compat&quot;
             */
            compatMode: {
                value: compatMode
            },
            /**
             * User agent string
             * @property userAgent
             * @type {String}
             * @default &quot;&quot;
             */
            userAgent: {
                value: userAgent
            },
            /**
             * Browser render model CSS1Compat
             * @property strict
             * @type {Boolean}
             * @default true
             */
            strict: {
                value: compatMode === &#x27;CSS1Compat&#x27;
            },
            /**
             * If it is secure
             * @property strict
             * @type {Boolean}
             * @default false
             */
            secure: {
                value: protocol.indexOf(&#x27;https&#x27;) === 0
            },
            /**
             * Get operating system information
             * @property os
             * @type {Object}
             * @default {}
             */
            os: {
                value: os
            },
            /**
             * Get specific prefix
             * @property prefix
             * @type {Array}
             * @default [&#x27;webkit&#x27;,&#x27;-webkit-&#x27;]
             */
            prefix: {
                value: vendorPrefixMap[engine.name]
            },
            /**
             * Get browser&#x27;s render engine information
             * @property engine
             * @type {Object}
             * @default {}
             */
            engine: {
                value: engine
            },
            /**
             * Get basic browser information
             * @property browser
             * @type {Object}
             * @default {}
             */
            browser: {
                value: browser
            },
            /**
             * Get keyboard key code map.
             * @property keyMap
             * @type {Object}
             * @default {}
             */
            keyMap: {
                value: keyMap
            }
        },
        methods: {
            /**
             * Whether the property is support
             * @method support
             * @param inName
             * @returns {*}
             */
            support: function (inName) {
                return supportMap[inName];
            },
            /**
             * Support map for debug
             * @method getSupportMap
             * @returns {{addEventListener: boolean, dispatchEvent: boolean, getBoundingClientRect: boolean, onmousewheel: boolean, XDomainRequest: boolean, crossDomain: boolean, getComputedStyle: boolean, iePropertyChange: boolean, w3cChange: boolean, w3cFocus: boolean, w3cInput: boolean, innerText: boolean, firstElementChild: boolean, cssFloat: boolean, opacity: boolean, filter: boolean, removeProperty: boolean}}
             */
            getSupportMap: function () {
                return supportMap;
            },
            /**
             * Register a support item
             * @method registerSupport
             * @param inName
             * @param inValue
             */
            registerSupport: function (inName, inValue) {
                if (!(inName in supportMap)) {
                    supportMap[inName] = inValue;
                }
            }
        }
    });

})(nx);

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
